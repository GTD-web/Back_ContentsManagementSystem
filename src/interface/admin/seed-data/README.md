# 시드 데이터 API

개발 및 테스트를 위한 시드 데이터 생성/관리 API입니다.

## 엔드포인트

### 1. 시드 데이터 생성

**POST** `/api/admin/seed/generate`

개발 및 테스트용 더미 데이터를 생성합니다.

#### Request Body

```json
{
  "scenario": "basic"
}
```

#### 파라미터

| 필드 | 타입 | 필수 | 설명 |
|------|------|------|------|
| scenario | enum | ✅ | 시드 데이터 시나리오 (`basic` \| `full`) - 드롭다운에서 선택 |

> 💡 **간편해진 API**: 이제 시나리오만 선택하면 미리 정의된 데이터가 자동으로 생성됩니다!

#### Response

```json
{
  "success": true,
  "message": "시드 데이터가 성공적으로 생성되었습니다.",
  "results": {
    "languages": 4,
    "announcements": 10,
    "news": 10,
    "brochures": 5,
    "categories": 5
  },
  "totalDuration": 1523
}
```

---

### 2. 시드 데이터 삭제

**DELETE** `/api/admin/seed/clear`

생성된 시드 데이터를 완전히 삭제합니다 (하드 삭제).

> ⚠️ **주의**: 이 작업은 데이터베이스에서 데이터를 완전히 제거합니다. 복구할 수 없습니다!

#### Response

```json
{
  "success": true,
  "message": "시드 데이터가 성공적으로 삭제되었습니다."
}
```

---

### 3. 시드 데이터 상태 조회

**GET** `/api/admin/seed/status`

현재 데이터베이스에 저장된 각 엔티티의 데이터 개수를 조회합니다.

#### Response

```json
{
  "languageCount": 4,
  "announcementCount": 10,
  "newsCount": 10,
  "brochureCount": 5,
  "categoryCount": 5,
  "electronicDisclosureCount": 0,
  "irCount": 0,
  "shareholdersMeetingCount": 0,
  "mainPopupCount": 0,
  "lumirStoryCount": 0,
  "videoGalleryCount": 0,
  "wikiCount": 0
}
```

---

## 사용 예시

### cURL

```bash
# 시드 데이터 생성 (BASIC)
curl -X POST http://localhost:4001/api/admin/seed/generate \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{
    "scenario": "basic"
  }'

# 시드 데이터 생성 (FULL)
curl -X POST http://localhost:4001/api/admin/seed/generate \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -d '{
    "scenario": "full"
  }'

# 시드 데이터 상태 조회
curl -X GET http://localhost:4001/api/admin/seed/status \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"

# 시드 데이터 삭제
curl -X DELETE http://localhost:4001/api/admin/seed/clear \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

---

## 시나리오 설명

### 📦 BASIC 시나리오 (권장)
빠른 개발과 테스트를 위한 기본 데이터 세트입니다.

**생성되는 데이터:**
- 🌍 **언어 4개**: 한국어, 영어, 일본어, 중국어
- 📢 **공지사항 15개** (다양한 권한 패턴, 다국어 미지원)
  - 1~3번: 고정 공지 + 필독 + 전사 공개
  - 4~6번: 일반 공지 + **특정 직원 5명** (제한 공개)
  - 7~9번: 일반 공지 + **특정 부서 3개** (제한 공개)
  - 10~12번: 일반 공지 + **특정 직급 2개** (제한 공개)
  - 13~15번: 일반 공지 + **특정 직책 2개** (제한 공개)
  - 25% 확률로 첨부파일 포함 (PDF, 이미지)
- 📁 **공지사항 카테고리 3개**
  - 일반 공지
  - 긴급 공지
  - 시스템 공지
- 📰 **뉴스 10개**: 제목, 설명, URL 포함 (다국어 미지원)
- 📄 **브로셔 5개** (✨ 다국어 자동 생성)
  - 각 브로셔당 **4개 언어 번역** 자동 생성
  - 한국어: 사용자 입력 (isSynced: false)
  - 영어/일본어/중국어: 자동 동기화 (isSynced: true)
  - 모든 브로셔에 PDF 첨부파일 포함

**권한 설정 방식:**
- SSO 서버에서 실제 부서, 직급, 직책 정보를 가져와서 자동 설정
- 권한이 설정된 공지사항은 `isPublic: false`로 제한 공개
- SSO 연동 실패 시 권한 없이 전사 공개로 생성

**특징:**
- 생성 시간: ~3초
- 실제 환경과 유사한 권한 구조
- 첨부파일 더미 데이터 포함
- **다국어 전략 적용**: 브로셔는 모든 활성 언어에 대한 번역 자동 생성
- 즉시 테스트 가능한 최소 데이터

**다국어 지원 현황:**
| 엔티티 | 다국어 지원 | 시나리오 | 생성 방식 |
|--------|------------|---------|---------|
| 브로셔 (Brochure) | ✅ 지원 | BASIC, FULL | 한국어 입력 → 나머지 언어 자동 동기화 |
| 전자공시 (ElectronicDisclosure) | ✅ 지원 | FULL | 한국어 입력 → 나머지 언어 자동 동기화 |
| IR | ✅ 지원 | FULL | 한국어 입력 → 나머지 언어 자동 동기화 |
| 주주총회 (ShareholdersMeeting) | ✅ 지원 | FULL | 한국어 입력 → 나머지 언어 자동 동기화 |
| 메인 팝업 (MainPopup) | ✅ 지원 | FULL | 한국어 입력 → 나머지 언어 자동 동기화 |
| 공지사항 (Announcement) | ❌ 미지원 | BASIC, FULL | 단일 언어 생성 |
| 뉴스 (News) | ❌ 미지원 | BASIC, FULL | 단일 언어 생성 |

**사용 사례:**
- 빠른 개발 환경 구축
- 권한 기반 필터링 테스트
- 첨부파일 UI 테스트
- 프론트엔드 개발용 더미 데이터

---

### 🎯 FULL 시나리오
전체 시스템 테스트를 위한 완전한 데이터 세트입니다.

**생성되는 데이터:**
- ✅ **BASIC 시나리오의 모든 데이터 포함**
  - 언어 4개, 공지사항 15개, 뉴스 10개, 브로셔 5개 등

- ✨ **추가 다국어 엔티티들**
  - 📋 **전자공시 10개** (다국어 × 4개 언어 = 40개 번역)
    - 분기보고서, 반기보고서, 사업보고서 등
  - 📊 **IR 자료 10개** (다국어 × 4개 언어 = 40개 번역)
  - 👥 **주주총회 5개** (다국어 × 4개 언어 = 20개 번역) + 안건 10개
  - 🔔 **메인 팝업 3개** (다국어 × 4개 언어 = 12개 번역)

- ✨ **추가 일반 엔티티들**
  - 📖 **루미르스토리 10개** (회사 스토리, 이미지 포함)
  - 🎬 **비디오갤러리 8개** (YouTube 영상 링크)
  - 📚 **Wiki 문서 10개** (폴더 3개 + 파일 7개)

**총 생성 레코드:**
- 메인 엔티티: **66개**
- 번역 레코드: **132개** (모든 다국어 지원 엔티티)
- 안건(VoteResult): 10개 + 번역 40개
- Wiki 폴더/파일: 10개

**특징:**
- 생성 시간: ~10초
- **모든 다국어 지원 엔티티** 포함
- 실제 프로덕션 환경과 유사한 데이터 구조
- 각 엔티티별 첨부파일 포함

**사용 사례:**
- 전체 시스템 통합 테스트
- 다국어 기능 테스트
- 데모 환경 구축
- 성능 테스트

---

### 💡 선택 가이드

| 시나리오 | 메인 엔티티 | 번역 레코드 | 생성 시간 | 추천 용도 |
|---------|-----------|------------|----------|----------|
| BASIC | 35개 | 20개 | ~3초 | 일반 개발/테스트 |
| FULL | 66개 | 132개 | ~15초 | 통합 테스트/데모/다국어 |

---

## 주의사항

1. **인증 필요**: 모든 엔드포인트는 JWT 인증이 필요합니다.
2. **권한**: 관리자 권한이 필요합니다.
3. **⚠️ 자동 삭제**: 시드 데이터 생성 시 **기존 시드 데이터가 자동으로 삭제**됩니다.
4. **⚠️ 하드 삭제**: 모든 삭제는 **하드 삭제**입니다. 데이터가 완전히 제거되며 복구할 수 없습니다!
5. **Language는 보존**: 시드 데이터 삭제 시에도 Language 엔티티는 삭제되지 않습니다 (시스템 기본 데이터).
6. **고정 데이터**: 각 시나리오는 미리 정의된 데이터 세트를 생성합니다. 커스터마이징이 필요한 경우 코드를 수정해야 합니다.
7. **다국어 자동 생성**: 다국어 지원 엔티티는 모든 활성 언어에 대한 번역이 자동으로 생성됩니다 (다국어 전략 적용).
8. **SSO 연동**: 공지사항 권한 설정을 위해 SSO 서버에서 회사 정보를 조회합니다 (실패 시 권한 없이 생성).

---

## Swagger 문서

Swagger UI에서 더 자세한 API 문서를 확인할 수 있습니다:

```
http://localhost:4001/api/admin/api-docs
```

태그: `A-0. 관리자 - 시드 데이터`
