---
alwaysApply: false
---

# ë©”ì¸ íŒì—… ìƒíƒœ íë¦„ ë‹¤ì´ì–´ê·¸ë¨ (API í¬í•¨)

## ğŸ“‹ ê°œìš”

ë©”ì¸ íŒì—…ì€ ì½˜í…ì¸  ê´€ë¦¬ ì‹œìŠ¤í…œì˜ í•µì‹¬ ì—”í‹°í‹°ë¡œ, **ìƒíƒœ(Status)**ì™€ **ê³µê°œ ì—¬ë¶€(isPublic)** ë‘ ê°€ì§€ ì°¨ì›ì—ì„œ ê´€ë¦¬ë©ë‹ˆë‹¤.

## ğŸ”„ ìƒíƒœ(Status) ì •ì˜

| ìƒíƒœ       | ê°’             | ì„¤ëª…                              |
| ---------- | -------------- | --------------------------------- |
| **ì´ˆì•ˆ**   | `draft`        | ì‘ì„± ì¤‘ì¸ ìƒíƒœ, ì•„ì§ ê²€í†  ìš”ì²­ ì „ |
| **ê²€í† ì¤‘** | `under_review` | ê²€í†  ìš”ì²­ í›„ ìŠ¹ì¸ ëŒ€ê¸° ì¤‘         |
| **ìŠ¹ì¸ë¨** | `approved`     | ê²€í†  ì™„ë£Œ, ìŠ¹ì¸ëœ ìƒíƒœ            |
| **ê±°ë¶€ë¨** | `rejected`     | ê²€í†  ê²°ê³¼ ê±°ë¶€ëœ ìƒíƒœ             |
| **ê³µê°œë¨** | `opened`       | ìµœì¢… ê³µê°œëœ ìƒíƒœ                  |

## ğŸ“Š ìƒíƒœ ì „ì´ ë‹¤ì´ì–´ê·¸ë¨ (API í¬í•¨)

```mermaid
stateDiagram-v2
    [*] --> draft: ë©”ì¸ íŒì—… ìƒì„±

    draft --> under_review: ê²€í†  ìš”ì²­ (êµ¬í˜„ í•„ìš”)
    draft --> draft: ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥

    under_review --> approved: ìŠ¹ì¸ (êµ¬í˜„ í•„ìš”)
    under_review --> rejected: ê±°ë¶€ (êµ¬í˜„ í•„ìš”)
    under_review --> draft: ê²€í†  ì·¨ì†Œ (êµ¬í˜„ í•„ìš”)

    approved --> opened: ê³µê°œ ì„¤ì • (êµ¬í˜„ í•„ìš”)
    approved --> draft: ìˆ˜ì • ì‹œì‘ (êµ¬í˜„ í•„ìš”)

    rejected --> draft: ìˆ˜ì • ì‹œì‘ (êµ¬í˜„ í•„ìš”)

    opened --> draft: ìˆ˜ì • ì‹œì‘
    opened --> opened: ë¹„ê³µê°œ ì„¤ì •

    note right of draft
        ì´ˆì•ˆ ìƒíƒœ
        ëª¨ë“  ìˆ˜ì • ê°€ëŠ¥
    end note

    note right of under_review
        ê²€í† ì¤‘ ìƒíƒœ
        ìˆ˜ì •/ì‚­ì œ ë¶ˆê°€
    end note

    note right of approved
        ìŠ¹ì¸ë¨ ìƒíƒœ
        ê³µê°œ ì¤€ë¹„ ì™„ë£Œ
    end note

    note right of rejected
        ê±°ë¶€ë¨ ìƒíƒœ
        ìˆ˜ì • í•„ìš”
    end note

    note right of opened
        ê³µê°œë¨ ìƒíƒœ
        ì‚¬ìš©ì ë…¸ì¶œ
    end note
```

### ğŸ”— ìƒíƒœ ì „ì´ì™€ API ë§¤í•‘

| ìƒíƒœ ì „ì´               | ì•¡ì…˜          | API ì—”ë“œí¬ì¸íŠ¸                                                                                                                      | êµ¬í˜„ ìƒíƒœ |
| ----------------------- | ------------- | ----------------------------------------------------------------------------------------------------------------------------------- | --------- |
| **[ìƒì„±]** â†’ draft      | ë©”ì¸ íŒì—… ìƒì„± | `POST /api/admin/main-popups`                                                                                                       | âœ…        |
| draft â†’ under_review    | ê²€í†  ìš”ì²­     | `PATCH /api/admin/main-popups/:id/status` (êµ¬í˜„ í•„ìš”)                                                                               | âŒ        |
| draft â†’ draft           | ìˆ˜ì •/ì‚­ì œ     | `PUT /api/admin/main-popups/:id`<br/>`PATCH /api/admin/main-popups/:id/public`<br/>`PUT /api/admin/main-popups/batch-order`<br/>`DELETE /api/admin/main-popups/:id` | âœ…        |
| under_review â†’ approved | ìŠ¹ì¸          | `PATCH /api/admin/main-popups/:id/status` (êµ¬í˜„ í•„ìš”)                                                                               | âŒ        |
| under_review â†’ rejected | ê±°ë¶€          | `PATCH /api/admin/main-popups/:id/status` (êµ¬í˜„ í•„ìš”)                                                                               | âŒ        |
| under_review â†’ draft    | ê²€í†  ì·¨ì†Œ     | `PATCH /api/admin/main-popups/:id/status` (êµ¬í˜„ í•„ìš”)                                                                               | âŒ        |
| approved â†’ opened       | ê³µê°œ ì„¤ì •     | `PATCH /api/admin/main-popups/:id/status` (êµ¬í˜„ í•„ìš”)                                                                               | âŒ        |
| approved â†’ draft        | ìˆ˜ì • ì‹œì‘     | `PUT /api/admin/main-popups/:id` (ìë™ ìƒíƒœ ì „ì´, êµ¬í˜„ í•„ìš”)                                                                        | âŒ        |
| rejected â†’ draft        | ìˆ˜ì • ì‹œì‘     | `PATCH /api/admin/main-popups/:id/status` (êµ¬í˜„ í•„ìš”)                                                                               | âŒ        |
| opened â†’ draft          | ìˆ˜ì • ì‹œì‘     | `PUT /api/admin/main-popups/:id` (ìë™ ìƒíƒœ ì „ì´, êµ¬í˜„ í•„ìš”)                                                                        | âŒ        |
| opened â†’ opened         | ë¹„ê³µê°œ ì„¤ì •   | `PATCH /api/admin/main-popups/:id/public`                                                                                           | âœ…        |

## ğŸŒ ì „ì²´ API ì—”ë“œí¬ì¸íŠ¸ ë§µ

### ìƒíƒœì™€ ë¬´ê´€í•œ ì¡°íšŒ API

```mermaid
graph LR
    A[ë©”ì¸ íŒì—… API] --> B[GET /main-popups]
    A --> C[GET /main-popups/all]
    A --> D[GET /main-popups/:id]
    A --> E[GET /main-popups/categories]

    B --> B1[ëª©ë¡ ì¡°íšŒ í˜ì´ì§•]
    C --> C1[ì „ì²´ ëª©ë¡]
    D --> D1[ìƒì„¸ ì¡°íšŒ]
    E --> E1[ì¹´í…Œê³ ë¦¬ ëª©ë¡]
```

### ìƒíƒœë³„ ê°€ëŠ¥í•œ API ì•¡ì…˜

```mermaid
graph TD
    subgraph DRAFT["DRAFT ì´ˆì•ˆ"]
        D1[POST ìƒì„± âœ…]
        D2[PUT ìˆ˜ì • âœ…]
        D3[PATCH public âœ…]
        D4[PUT batch-order âœ…]
        D5[DELETE ì‚­ì œ âœ…]
        D6[PATCH status â†’ UNDER_REVIEW âŒ]
    end

    subgraph UNDER_REVIEW["UNDER_REVIEW ê²€í† ì¤‘ êµ¬í˜„ í•„ìš”"]
        U1[GET ì¡°íšŒë§Œ ê°€ëŠ¥]
        U2[PATCH status â†’ APPROVED âŒ]
        U3[PATCH status â†’ REJECTED âŒ]
        U4[PATCH status â†’ DRAFT âŒ]
    end

    subgraph APPROVED["APPROVED ìŠ¹ì¸ë¨ êµ¬í˜„ í•„ìš”"]
        A1[GET ì¡°íšŒ]
        A2[PATCH status â†’ OPENED âŒ]
        A3[PATCH public âœ…]
        A4[PUT ìˆ˜ì • â†’ DRAFT ì „ì´ âŒ]
        A5[DELETE ì‚­ì œ âœ…]
    end

    subgraph REJECTED["REJECTED ê±°ë¶€ë¨ êµ¬í˜„ í•„ìš”"]
        R1[GET ì¡°íšŒ]
        R2[PATCH status â†’ DRAFT âŒ]
        R3[DELETE ì‚­ì œ âœ…]
    end

    subgraph OPENED["OPENED ê³µê°œë¨"]
        O1[GET ì¡°íšŒ]
        O2[PATCH public âœ…]
        O3[PUT ìˆ˜ì • â†’ DRAFT ì „ì´ âŒ]
        O4[DELETE ì‚­ì œ âœ…]
    end

    style DRAFT fill:#e3f2fd
    style UNDER_REVIEW fill:#fff3e0
    style APPROVED fill:#e8f5e9
    style REJECTED fill:#ffebee
    style OPENED fill:#f3e5f5
```

## ğŸ”„ ìƒíƒœ ì „ì´ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì •ìƒì ì¸ ê³µê°œ í”„ë¡œì„¸ìŠ¤

```mermaid
sequenceDiagram
    participant Admin as ê´€ë¦¬ì
    participant API as API ì„œë²„
    participant DB as ë°ì´í„°ë² ì´ìŠ¤

    Note over Admin,DB: 1. ë©”ì¸ íŒì—… ìƒì„±
    Admin->>API: POST /api/admin/main-popups
    API->>DB: INSERT (status: 'draft', isPublic: false)
    DB-->>API: ìƒì„± ì™„ë£Œ
    API-->>Admin: 201 Created (DRAFT)

    Note over Admin,DB: 2. íŒŒì¼ ë° ë‚´ìš© ìˆ˜ì •
    Admin->>API: PUT /api/admin/main-popups/:id
    API->>DB: UPDATE translations and files
    DB-->>API: ìˆ˜ì • ì™„ë£Œ
    API-->>Admin: 200 OK

    Note over Admin,DB: 3. ê²€í†  ìš”ì²­ (êµ¬í˜„ í•„ìš”)
    Admin->>API: PATCH /api/admin/main-popups/:id/status
    Note right of API: {status: 'under_review'}
    API->>DB: UPDATE status = 'under_review'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (UNDER_REVIEW)

    Note over Admin,DB: 4. ìŠ¹ì¸ (êµ¬í˜„ í•„ìš”)
    Admin->>API: PATCH /api/admin/main-popups/:id/status
    Note right of API: {status: 'approved'}
    API->>DB: UPDATE status = 'approved'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (APPROVED)

    Note over Admin,DB: 5. ê³µê°œ ì„¤ì • (êµ¬í˜„ í•„ìš”)
    Admin->>API: PATCH /api/admin/main-popups/:id/status
    Note right of API: {status: 'opened'}
    API->>DB: UPDATE status = 'opened'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (OPENED)

    Note over Admin,DB: 6. ê³µê°œ ì—¬ë¶€ í™œì„±í™”
    Admin->>API: PATCH /api/admin/main-popups/:id/public
    Note right of API: {isPublic: true}
    API->>DB: UPDATE isPublic = true
    DB-->>API: ìˆ˜ì • ì™„ë£Œ
    API-->>Admin: 200 OK

    Note over Admin,DB: âœ… ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œë¨
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ê±°ë¶€ í›„ ì¬ê²€í† 

```mermaid
sequenceDiagram
    participant Admin as ê´€ë¦¬ì
    participant API as API ì„œë²„
    participant DB as ë°ì´í„°ë² ì´ìŠ¤

    Note over Admin,DB: 1-3. ìƒì„± â†’ ê²€í†  ìš”ì²­ (ìƒëµ)

    Note over Admin,DB: 4. ê±°ë¶€ (êµ¬í˜„ í•„ìš”)
    Admin->>API: PATCH /api/admin/main-popups/:id/status
    Note right of API: {status: 'rejected'}
    API->>DB: UPDATE status = 'rejected'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (REJECTED)

    Note over Admin,DB: 5. ìˆ˜ì • ì‹œì‘ (êµ¬í˜„ í•„ìš”)
    Admin->>API: PATCH /api/admin/main-popups/:id/status
    Note right of API: {status: 'draft'}
    API->>DB: UPDATE status = 'draft'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (DRAFT)

    Note over Admin,DB: 6. ë‚´ìš© ìˆ˜ì •
    Admin->>API: PUT /api/admin/main-popups/:id
    API->>DB: UPDATE translations and files
    DB-->>API: ìˆ˜ì • ì™„ë£Œ
    API-->>Admin: 200 OK

    Note over Admin,DB: 7. ì¬ê²€í†  ìš”ì²­ (êµ¬í˜„ í•„ìš”)
    Admin->>API: PATCH /api/admin/main-popups/:id/status
    Note right of API: {status: 'under_review'}
    API->>DB: UPDATE status = 'under_review'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (UNDER_REVIEW)

    Note over Admin,DB: 8-10. ìŠ¹ì¸ â†’ ê³µê°œ (ìƒëµ)
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ê³µê°œëœ ì½˜í…ì¸  ìˆ˜ì • (êµ¬í˜„ í•„ìš”)

```mermaid
sequenceDiagram
    participant Admin as ê´€ë¦¬ì
    participant API as API ì„œë²„
    participant DB as ë°ì´í„°ë² ì´ìŠ¤
    participant User as ì‚¬ìš©ì

    Note over Admin,User: âœ… í˜„ì¬ ê³µê°œ ì¤‘ (OPENED, isPublic: true)
    User->>API: GET /api/public/main-popups
    API->>DB: SELECT WHERE status='opened' AND isPublic=true
    DB-->>API: ë©”ì¸ íŒì—… ëª©ë¡
    API-->>User: 200 OK (ë…¸ì¶œë¨)

    Note over Admin,User: ìˆ˜ì • í•„ìš” ë°œìƒ (ìë™ ìƒíƒœ ì „ì´, êµ¬í˜„ í•„ìš”)
    Admin->>API: PUT /api/admin/main-popups/:id
    API->>DB: UPDATE status = 'draft' (ìë™ ì „ì´)
    API->>DB: UPDATE translations and files
    DB-->>API: ìˆ˜ì • ì™„ë£Œ
    API-->>Admin: 200 OK (DRAFT)

    Note over Admin,User: âŒ ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œ ì¤‘ë‹¨
    User->>API: GET /api/public/main-popups
    API->>DB: SELECT WHERE status='opened' AND isPublic=true
    DB-->>API: í•´ë‹¹ ë©”ì¸ íŒì—… ì œì™¸
    API-->>User: 200 OK (ë…¸ì¶œ ì•ˆ ë¨)

    Note over Admin,User: ìˆ˜ì • â†’ ê²€í†  â†’ ìŠ¹ì¸ â†’ ì¬ê³µê°œ
    Admin->>API: PATCH /api/admin/main-popups/:id/status
    Note right of API: under_review â†’ approved â†’ opened
    API->>DB: UPDATE status
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (OPENED)

    Note over Admin,User: âœ… ì‚¬ìš©ìì—ê²Œ ë‹¤ì‹œ ë…¸ì¶œë¨
```

## ğŸ¯ API ì—”ë“œí¬ì¸íŠ¸ ìƒì„¸ ëª…ì„¸

### 1. ë©”ì¸ íŒì—… ìƒì„± âœ…

```
POST /api/admin/main-popups
Content-Type: multipart/form-data

Body:
- translations: JSON string (ë°°ì—´)
  ì˜ˆ: '[{"languageId":"uuid","title":"ì œëª©","description":"ì„¤ëª…"}]'
- files: íŒŒì¼ ë°°ì—´ (PDF/JPG/PNG/WEBP/XLSX/DOCX)

Response: 201 Created
- status: 'draft' (ê¸°ë³¸ê°’)
- isPublic: false (ê¸°ë³¸ê°’)
```

### 2. ìƒíƒœ ë³€ê²½ (êµ¬í˜„ í•„ìš”) âŒ

```
PATCH /api/admin/main-popups/:id/status

Body:
{
  "status": "under_review" | "approved" | "rejected" | "opened" | "draft"
}

Response: 200 OK
- ë³€ê²½ëœ ë©”ì¸ íŒì—… ì •ë³´
```

### 3. ê³µê°œ ì—¬ë¶€ ë³€ê²½ âœ…

```
PATCH /api/admin/main-popups/:id/public

Body:
{
  "isPublic": true | false
}

Response: 200 OK
- ë³€ê²½ëœ ë©”ì¸ íŒì—… ì •ë³´
```

### 4. ë©”ì¸ íŒì—… ìˆ˜ì • âœ…

```
PUT /api/admin/main-popups/:id
Content-Type: multipart/form-data

Body:
- translations: JSON string (ë°°ì—´)
- files: íŒŒì¼ ë°°ì—´ (ì „ì†¡í•œ íŒŒì¼ë“¤ë¡œ ì™„ì „íˆ êµì²´)

Response: 200 OK
- statusê°€ 'opened'ì˜€ë‹¤ë©´ ìë™ìœ¼ë¡œ 'draft'ë¡œ ì „ì´ (êµ¬í˜„ í•„ìš”)
```

### 5. ë©”ì¸ íŒì—… ì‚­ì œ (Soft Delete) âœ…

```
DELETE /api/admin/main-popups/:id

Response: 200 OK
{
  "success": true
}
```

### 6. ì •ë ¬ ìˆœì„œ ì¼ê´„ ìˆ˜ì • âœ…

```
PUT /api/admin/main-popups/batch-order

Body:
{
  "mainPopups": [
    { "id": "uuid1", "order": 1 },
    { "id": "uuid2", "order": 2 }
  ]
}

Response: 200 OK
{
  "success": true,
  "updatedCount": 2
}
```

### 7. ë©”ì¸ íŒì—… ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•) âœ…

```
GET /api/admin/main-popups?isPublic=true&orderBy=order&page=1&limit=10

Response: 200 OK
{
  "items": [...],
  "total": 50,
  "page": 1,
  "limit": 10,
  "totalPages": 5
}
```

### 8. ë©”ì¸ íŒì—… ì „ì²´ ëª©ë¡ ì¡°íšŒ âœ…

```
GET /api/admin/main-popups/all

Response: 200 OK
[...ë©”ì¸ íŒì—… ë°°ì—´...]
```

### 9. ë©”ì¸ íŒì—… ìƒì„¸ ì¡°íšŒ âœ…

```
GET /api/admin/main-popups/:id

Response: 200 OK
{
  "id": "uuid",
  "status": "draft",
  "isPublic": false,
  "order": 0,
  "attachments": [...],
  "translations": [...],
  ...
}
```

### 10. ì¹´í…Œê³ ë¦¬ ê´€ë ¨ API âœ…

```
GET /api/admin/main-popups/categories
POST /api/admin/main-popups/categories
PATCH /api/admin/main-popups/categories/:id
PATCH /api/admin/main-popups/categories/:id/order
DELETE /api/admin/main-popups/categories/:id
```

## ğŸ”“ ê³µê°œ ì¡°ê±´ í”Œë¡œìš°

```mermaid
flowchart TD
    Start([ë©”ì¸ íŒì—… API ìš”ì²­])
    Start --> CheckAPI{API íƒ€ì…?}

    CheckAPI -->|ê´€ë¦¬ì API| AdminAPI[ì „ì²´ ì¡°íšŒ ê°€ëŠ¥]
    CheckAPI -->|ê³µê°œ API| PublicAPI[í•„í„°ë§ í•„ìš”]

    PublicAPI --> CheckDeleted{deletedAtì´ nullì¸ê°€?}

    CheckDeleted -->|No| NotVisible1[âŒ ë…¸ì¶œ ì•ˆ ë¨]
    CheckDeleted -->|Yes| CheckStatus{statusê°€ openedì¸ê°€?}

    CheckStatus -->|No| NotVisible2[âŒ ë…¸ì¶œ ì•ˆ ë¨]
    CheckStatus -->|Yes| CheckPublic{isPublicì´ trueì¸ê°€?}

    CheckPublic -->|No| NotVisible3[âŒ ë…¸ì¶œ ì•ˆ ë¨]
    CheckPublic -->|Yes| Visible[âœ… ì‚¬ìš©ìì—ê²Œ ë…¸ì¶œë¨]

    style NotVisible1 fill:#ffcccc
    style NotVisible2 fill:#ffcccc
    style NotVisible3 fill:#ffcccc
    style Visible fill:#ccffcc
    style AdminAPI fill:#e3f2fd
```

## ğŸ“‹ ìƒíƒœ ì „ì´ ê·œì¹™ ìš”ì•½

### í—ˆìš©ë˜ëŠ” ì „ì´

| í˜„ì¬ ìƒíƒœ      | ë‹¤ìŒ ìƒíƒœ      | API ì—”ë“œí¬ì¸íŠ¸                                  | ì¡°ê±´        | êµ¬í˜„ ìƒíƒœ |
| -------------- | -------------- | ----------------------------------------------- | ----------- | --------- |
| `draft`        | `under_review` | `PATCH /api/admin/main-popups/:id/status`       | ê²€í†  ìš”ì²­   | âŒ        |
| `under_review` | `approved`     | `PATCH /api/admin/main-popups/:id/status`       | ìŠ¹ì¸        | âŒ        |
| `under_review` | `rejected`     | `PATCH /api/admin/main-popups/:id/status`       | ê±°ë¶€        | âŒ        |
| `under_review` | `draft`        | `PATCH /api/admin/main-popups/:id/status`       | ê²€í†  ì·¨ì†Œ   | âŒ        |
| `approved`     | `opened`       | `PATCH /api/admin/main-popups/:id/status`       | ê³µê°œ ì„¤ì •   | âŒ        |
| `approved`     | `draft`        | `PUT /api/admin/main-popups/:id` (ìë™ ì „ì´)    | ìˆ˜ì • ì‹œì‘   | âŒ        |
| `rejected`     | `draft`        | `PATCH /api/admin/main-popups/:id/status`       | ìˆ˜ì • ì‹œì‘   | âŒ        |
| `opened`       | `draft`        | `PUT /api/admin/main-popups/:id` (ìë™ ì „ì´)    | ìˆ˜ì • ì‹œì‘   | âŒ        |
| `opened`       | `opened`       | `PATCH /api/admin/main-popups/:id/public`       | ë¹„ê³µê°œ ì„¤ì • | âœ…        |

### ê¸ˆì§€ë˜ëŠ” ì „ì´

- âŒ `draft` â†’ `approved` (ê²€í†  ì—†ì´ ìŠ¹ì¸ ë¶ˆê°€)
- âŒ `draft` â†’ `opened` (ê²€í†  ë° ìŠ¹ì¸ ì—†ì´ ê³µê°œ ë¶ˆê°€)
- âŒ `rejected` â†’ `approved` (ê±°ë¶€ í›„ ë°”ë¡œ ìŠ¹ì¸ ë¶ˆê°€)
- âŒ `rejected` â†’ `opened` (ê±°ë¶€ëœ ì½˜í…ì¸  ê³µê°œ ë¶ˆê°€)
- âŒ `under_review` â†’ `opened` (ê²€í†  ì¤‘ ê³µê°œ ë¶ˆê°€)

## ğŸ”§ êµ¬í˜„ í•„ìš” ì‚¬í•­

### í˜„ì¬ êµ¬í˜„ëœ ê¸°ëŠ¥ âœ…

- âœ… ë©”ì¸ íŒì—… ìƒì„± (ê¸°ë³¸ê°’: `status: 'draft'`)
- âœ… ë©”ì¸ íŒì—… ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•)
- âœ… ë©”ì¸ íŒì—… ì „ì²´ ëª©ë¡ ì¡°íšŒ
- âœ… ë©”ì¸ íŒì—… ìƒì„¸ ì¡°íšŒ
- âœ… ê³µê°œ ì—¬ë¶€ ìˆ˜ì • (`isPublic`)
- âœ… ë©”ì¸ íŒì—… ìˆ˜ì • (ë²ˆì—­ ë° íŒŒì¼)
- âœ… ì •ë ¬ ìˆœì„œ ì¼ê´„ ìˆ˜ì •
- âœ… ì‚­ì œ (Soft Delete)
- âœ… ì¹´í…Œê³ ë¦¬ CRUD

### êµ¬í˜„ í•„ìš” ê¸°ëŠ¥ âŒ

- âš ï¸ **ìƒíƒœ ë³€ê²½ API** (`PATCH /api/admin/main-popups/:id/status`)
  - ìƒíƒœ ì „ì´ ê²€ì¦ ë¡œì§
  - í—ˆìš©ë˜ì§€ ì•ŠëŠ” ìƒíƒœ ì „ì´ ë°©ì§€
  - ìƒíƒœë³„ ì•¡ì…˜ ì œí•œ ê²€ì¦

- âš ï¸ **ìë™ ìƒíƒœ ì „ì´**
  - `opened` ë˜ëŠ” `approved` ìƒíƒœì—ì„œ ë‚´ìš© ìˆ˜ì • ì‹œ ìë™ìœ¼ë¡œ `draft`ë¡œ ì „ì´
  - íŠ¸ëœì­ì…˜ ì²˜ë¦¬ í•„ìš”

- âš ï¸ **ìƒíƒœë³„ ê¶Œí•œ ì²´í¬**
  - ê²€í† ì¤‘ ìƒíƒœì—ì„œëŠ” ìˆ˜ì •/ì‚­ì œ ë¶ˆê°€
  - ìŠ¹ì¸ ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë§Œ ìƒíƒœ ë³€ê²½ ê°€ëŠ¥

## ğŸ“š ì°¸ê³  ì‚¬í•­

- ìƒíƒœ ë³€ê²½ì€ **ì›ìì (Atomic)**ìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ì•¼ í•¨
- ìƒíƒœ ì „ì´ ì‹œ **ì´ë ¥ ë¡œê¹…** ê³ ë ¤ (ì„ íƒì‚¬í•­)
- **Optimistic Locking** (`version` í•„ë“œ)ì„ í™œìš©í•˜ì—¬ ë™ì‹œ ìˆ˜ì • ë°©ì§€
- ìƒíƒœë³„ **ê¶Œí•œ ì²´í¬** í•„ìš” (ì˜ˆ: ìŠ¹ì¸ ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë§Œ ìƒíƒœ ë³€ê²½ ê°€ëŠ¥)

## ğŸ¨ ë‹¤êµ­ì–´ ì „ëµ

ë©”ì¸ íŒì—…ì€ ë‹¤êµ­ì–´ë¥¼ ì§€ì›í•˜ë©°, ë‹¤ìŒê³¼ ê°™ì€ ì „ëµì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

1. **ì „ë‹¬ë°›ì€ ì–¸ì–´**: `isSynced = false` (ì‚¬ìš©ì ì…ë ¥)
2. **ë‚˜ë¨¸ì§€ í™œì„± ì–¸ì–´**: `isSynced = true` (ìë™ ë™ê¸°í™”)
3. **ê¸°ì¤€ ë²ˆì—­**: í•œêµ­ì–´ ìš°ì„ , ì—†ìœ¼ë©´ ì²« ë²ˆì§¸ ë²ˆì—­ì„ ê¸°ì¤€ìœ¼ë¡œ ìë™ ë™ê¸°í™”

## ğŸ—‚ï¸ íŒŒì¼ ê´€ë¦¬ ì „ëµ

ë©”ì¸ íŒì—…ì˜ ì²¨ë¶€íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì´ ê´€ë¦¬ë©ë‹ˆë‹¤:

1. **íŒŒì¼ ì—…ë¡œë“œ**: AWS S3ì— ì—…ë¡œë“œë˜ë©° JSONB í˜•íƒœë¡œ ì €ì¥
2. **íŒŒì¼ ìˆ˜ì •**: ê¸°ì¡´ íŒŒì¼ ì „ë¶€ ì‚­ì œ í›„ ìƒˆ íŒŒì¼ë¡œ êµì²´
3. **íŒŒì¼ í˜•ì‹**: PDF, JPG, PNG, WEBP, XLSX, DOCX ì§€ì›
4. **íŒŒì¼ëª…ìœ¼ë¡œ ì–¸ì–´ êµ¬ë¶„**: ì˜ˆ) `popup_image_ko.jpg`
