---
alwaysApply: false
---

# ì£¼ì£¼ì´íšŒ ìƒíƒœ íë¦„ ë‹¤ì´ì–´ê·¸ë¨ (API í¬í•¨)

## ğŸ“‹ ê°œìš”

ì£¼ì£¼ì´íšŒëŠ” ì½˜í…ì¸  ê´€ë¦¬ ì‹œìŠ¤í…œì˜ í•µì‹¬ ì—”í‹°í‹°ë¡œ, **ìƒíƒœ(Status)**ì™€ **ê³µê°œ ì—¬ë¶€(isPublic)** ë‘ ê°€ì§€ ì°¨ì›ì—ì„œ ê´€ë¦¬ë©ë‹ˆë‹¤.
ì£¼ì£¼ì´íšŒ ì •ë³´ì™€ í•¨ê»˜ ì˜ê²° ê²°ê³¼(ì•ˆê±´)ë¥¼ ê´€ë¦¬í•˜ë©°, ë‹¤êµ­ì–´ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.

## ğŸ”„ ìƒíƒœ(Status) ì •ì˜

| ìƒíƒœ       | ê°’             | ì„¤ëª…                              |
| ---------- | -------------- | --------------------------------- |
| **ì´ˆì•ˆ**   | `draft`        | ì‘ì„± ì¤‘ì¸ ìƒíƒœ, ì•„ì§ ê²€í†  ìš”ì²­ ì „ |
| **ê²€í† ì¤‘** | `under_review` | ê²€í†  ìš”ì²­ í›„ ìŠ¹ì¸ ëŒ€ê¸° ì¤‘         |
| **ìŠ¹ì¸ë¨** | `approved`     | ê²€í†  ì™„ë£Œ, ìŠ¹ì¸ëœ ìƒíƒœ            |
| **ê±°ë¶€ë¨** | `rejected`     | ê²€í†  ê²°ê³¼ ê±°ë¶€ëœ ìƒíƒœ             |
| **ê³µê°œë¨** | `opened`       | ìµœì¢… ê³µê°œëœ ìƒíƒœ                  |

## ğŸ“Š ìƒíƒœ ì „ì´ ë‹¤ì´ì–´ê·¸ë¨ (API í¬í•¨)

```mermaid
stateDiagram-v2
    [*] --> draft: ì£¼ì£¼ì´íšŒ ìƒì„±

    draft --> under_review: ê²€í†  ìš”ì²­ (êµ¬í˜„ í•„ìš”)
    draft --> draft: ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥

    under_review --> approved: ìŠ¹ì¸ (êµ¬í˜„ í•„ìš”)
    under_review --> rejected: ê±°ë¶€ (êµ¬í˜„ í•„ìš”)
    under_review --> draft: ê²€í†  ì·¨ì†Œ (êµ¬í˜„ í•„ìš”)

    approved --> opened: ê³µê°œ ì„¤ì • (êµ¬í˜„ í•„ìš”)
    approved --> draft: ìˆ˜ì • ì‹œì‘ (êµ¬í˜„ í•„ìš”)

    rejected --> draft: ìˆ˜ì • ì‹œì‘ (êµ¬í˜„ í•„ìš”)

    opened --> draft: ìˆ˜ì • ì‹œì‘
    opened --> opened: ë¹„ê³µê°œ ì„¤ì •

    note right of draft
        ì´ˆì•ˆ ìƒíƒœ
        ëª¨ë“  ìˆ˜ì • ê°€ëŠ¥
        ì˜ê²° ê²°ê³¼ ì¶”ê°€/ìˆ˜ì • ê°€ëŠ¥
    end note

    note right of under_review
        ê²€í† ì¤‘ ìƒíƒœ
        ìˆ˜ì •/ì‚­ì œ ë¶ˆê°€
    end note

    note right of approved
        ìŠ¹ì¸ë¨ ìƒíƒœ
        ê³µê°œ ì¤€ë¹„ ì™„ë£Œ
    end note

    note right of rejected
        ê±°ë¶€ë¨ ìƒíƒœ
        ìˆ˜ì • í•„ìš”
    end note

    note right of opened
        ê³µê°œë¨ ìƒíƒœ
        ì£¼ì£¼ ë…¸ì¶œ
    end note
```

### ğŸ”— ìƒíƒœ ì „ì´ì™€ API ë§¤í•‘

| ìƒíƒœ ì „ì´               | ì•¡ì…˜          | API ì—”ë“œí¬ì¸íŠ¸                                                                                                                       | êµ¬í˜„ ìƒíƒœ |
| ----------------------- | ------------- | ------------------------------------------------------------------------------------------------------------------------------------ | --------- |
| **[ìƒì„±]** â†’ draft      | ì£¼ì£¼ì´íšŒ ìƒì„± | `POST /api/admin/shareholders-meetings`                                                                                              | âœ…        |
| draft â†’ under_review    | ê²€í†  ìš”ì²­     | `PATCH /api/admin/shareholders-meetings/:id/status` (êµ¬í˜„ í•„ìš”)                                                                      | âŒ        |
| draft â†’ draft           | ìˆ˜ì •/ì‚­ì œ     | `PUT /api/admin/shareholders-meetings/:id`<br/>`PATCH /api/admin/shareholders-meetings/:id/public`<br/>`PUT /api/admin/shareholders-meetings/batch-order`<br/>`DELETE /api/admin/shareholders-meetings/:id` | âœ…        |
| under_review â†’ approved | ìŠ¹ì¸          | `PATCH /api/admin/shareholders-meetings/:id/status` (êµ¬í˜„ í•„ìš”)                                                                      | âŒ        |
| under_review â†’ rejected | ê±°ë¶€          | `PATCH /api/admin/shareholders-meetings/:id/status` (êµ¬í˜„ í•„ìš”)                                                                      | âŒ        |
| under_review â†’ draft    | ê²€í†  ì·¨ì†Œ     | `PATCH /api/admin/shareholders-meetings/:id/status` (êµ¬í˜„ í•„ìš”)                                                                      | âŒ        |
| approved â†’ opened       | ê³µê°œ ì„¤ì •     | `PATCH /api/admin/shareholders-meetings/:id/status` (êµ¬í˜„ í•„ìš”)                                                                      | âŒ        |
| approved â†’ draft        | ìˆ˜ì • ì‹œì‘     | `PUT /api/admin/shareholders-meetings/:id` (ìë™ ìƒíƒœ ì „ì´, êµ¬í˜„ í•„ìš”)                                                               | âŒ        |
| rejected â†’ draft        | ìˆ˜ì • ì‹œì‘     | `PATCH /api/admin/shareholders-meetings/:id/status` (êµ¬í˜„ í•„ìš”)                                                                      | âŒ        |
| opened â†’ draft          | ìˆ˜ì • ì‹œì‘     | `PUT /api/admin/shareholders-meetings/:id` (ìë™ ìƒíƒœ ì „ì´, êµ¬í˜„ í•„ìš”)                                                               | âŒ        |
| opened â†’ opened         | ë¹„ê³µê°œ ì„¤ì •   | `PATCH /api/admin/shareholders-meetings/:id/public`                                                                                  | âœ…        |

## ğŸŒ ì „ì²´ API ì—”ë“œí¬ì¸íŠ¸ ë§µ

### ìƒíƒœì™€ ë¬´ê´€í•œ ì¡°íšŒ API

```mermaid
graph LR
    A[ì£¼ì£¼ì´íšŒ API] --> B[GET /shareholders-meetings]
    A --> C[GET /shareholders-meetings/all]
    A --> D[GET /shareholders-meetings/:id]
    A --> E[GET /shareholders-meetings/categories]

    B --> B1[ëª©ë¡ ì¡°íšŒ í˜ì´ì§•]
    C --> C1[ì „ì²´ ëª©ë¡]
    D --> D1[ìƒì„¸ ì¡°íšŒ with ì˜ê²°ê²°ê³¼]
    E --> E1[ì¹´í…Œê³ ë¦¬ ëª©ë¡]
```

### ìƒíƒœë³„ ê°€ëŠ¥í•œ API ì•¡ì…˜

```mermaid
graph TD
    subgraph DRAFT["DRAFT ì´ˆì•ˆ"]
        D1[POST ìƒì„± âœ…]
        D2[PUT ìˆ˜ì • âœ…]
        D3[PATCH public âœ…]
        D4[PUT batch-order âœ…]
        D5[DELETE ì‚­ì œ âœ…]
        D6[ì˜ê²° ê²°ê³¼ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ âœ…]
        D7[PATCH status â†’ UNDER_REVIEW âŒ]
    end

    subgraph UNDER_REVIEW["UNDER_REVIEW ê²€í† ì¤‘ êµ¬í˜„ í•„ìš”"]
        U1[GET ì¡°íšŒë§Œ ê°€ëŠ¥]
        U2[PATCH status â†’ APPROVED âŒ]
        U3[PATCH status â†’ REJECTED âŒ]
        U4[PATCH status â†’ DRAFT âŒ]
    end

    subgraph APPROVED["APPROVED ìŠ¹ì¸ë¨ êµ¬í˜„ í•„ìš”"]
        A1[GET ì¡°íšŒ]
        A2[PATCH status â†’ OPENED âŒ]
        A3[PATCH public âœ…]
        A4[PUT ìˆ˜ì • â†’ DRAFT ì „ì´ âŒ]
        A5[DELETE ì‚­ì œ âœ…]
    end

    subgraph REJECTED["REJECTED ê±°ë¶€ë¨ êµ¬í˜„ í•„ìš”"]
        R1[GET ì¡°íšŒ]
        R2[PATCH status â†’ DRAFT âŒ]
        R3[DELETE ì‚­ì œ âœ…]
    end

    subgraph OPENED["OPENED ê³µê°œë¨"]
        O1[GET ì¡°íšŒ]
        O2[PATCH public âœ…]
        O3[PUT ìˆ˜ì • â†’ DRAFT ì „ì´ âŒ]
        O4[DELETE ì‚­ì œ âœ…]
    end

    style DRAFT fill:#e3f2fd
    style UNDER_REVIEW fill:#fff3e0
    style APPROVED fill:#e8f5e9
    style REJECTED fill:#ffebee
    style OPENED fill:#f3e5f5
```

## ğŸ”„ ìƒíƒœ ì „ì´ ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

### ì‹œë‚˜ë¦¬ì˜¤ 1: ì •ìƒì ì¸ ê³µê°œ í”„ë¡œì„¸ìŠ¤

```mermaid
sequenceDiagram
    participant Admin as ê´€ë¦¬ì
    participant API as API ì„œë²„
    participant DB as ë°ì´í„°ë² ì´ìŠ¤

    Note over Admin,DB: 1. ì£¼ì£¼ì´íšŒ ìƒì„± (ì˜ê²° ê²°ê³¼ í¬í•¨)
    Admin->>API: POST /api/admin/shareholders-meetings
    API->>DB: INSERT shareholders_meeting (status: 'draft', isPublic: false)
    API->>DB: INSERT translations
    API->>DB: INSERT vote_results + translations
    DB-->>API: ìƒì„± ì™„ë£Œ
    API-->>Admin: 201 Created (DRAFT)

    Note over Admin,DB: 2. ì£¼ì£¼ì´íšŒ ì •ë³´ ë° ì˜ê²° ê²°ê³¼ ìˆ˜ì •
    Admin->>API: PUT /api/admin/shareholders-meetings/:id
    API->>DB: UPDATE translations, vote_results, files
    DB-->>API: ìˆ˜ì • ì™„ë£Œ
    API-->>Admin: 200 OK

    Note over Admin,DB: 3. ê²€í†  ìš”ì²­ (êµ¬í˜„ í•„ìš”)
    Admin->>API: PATCH /api/admin/shareholders-meetings/:id/status
    Note right of API: {status: 'under_review'}
    API->>DB: UPDATE status = 'under_review'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (UNDER_REVIEW)

    Note over Admin,DB: 4. ìŠ¹ì¸ (êµ¬í˜„ í•„ìš”)
    Admin->>API: PATCH /api/admin/shareholders-meetings/:id/status
    Note right of API: {status: 'approved'}
    API->>DB: UPDATE status = 'approved'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (APPROVED)

    Note over Admin,DB: 5. ê³µê°œ ì„¤ì • (êµ¬í˜„ í•„ìš”)
    Admin->>API: PATCH /api/admin/shareholders-meetings/:id/status
    Note right of API: {status: 'opened'}
    API->>DB: UPDATE status = 'opened'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (OPENED)

    Note over Admin,DB: 6. ê³µê°œ ì—¬ë¶€ í™œì„±í™”
    Admin->>API: PATCH /api/admin/shareholders-meetings/:id/public
    Note right of API: {isPublic: true}
    API->>DB: UPDATE isPublic = true
    DB-->>API: ìˆ˜ì • ì™„ë£Œ
    API-->>Admin: 200 OK

    Note over Admin,DB: âœ… ì£¼ì£¼ì—ê²Œ ë…¸ì¶œë¨ (ì´íšŒ ì •ë³´ + ì˜ê²° ê²°ê³¼)
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ê±°ë¶€ í›„ ì¬ê²€í† 

```mermaid
sequenceDiagram
    participant Admin as ê´€ë¦¬ì
    participant API as API ì„œë²„
    participant DB as ë°ì´í„°ë² ì´ìŠ¤

    Note over Admin,DB: 1-3. ìƒì„± â†’ ê²€í†  ìš”ì²­ (ìƒëµ)

    Note over Admin,DB: 4. ê±°ë¶€ (êµ¬í˜„ í•„ìš”)
    Admin->>API: PATCH /api/admin/shareholders-meetings/:id/status
    Note right of API: {status: 'rejected'}
    API->>DB: UPDATE status = 'rejected'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (REJECTED)

    Note over Admin,DB: 5. ìˆ˜ì • ì‹œì‘ (êµ¬í˜„ í•„ìš”)
    Admin->>API: PATCH /api/admin/shareholders-meetings/:id/status
    Note right of API: {status: 'draft'}
    API->>DB: UPDATE status = 'draft'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (DRAFT)

    Note over Admin,DB: 6. ë‚´ìš© ìˆ˜ì • (ì˜ê²° ê²°ê³¼ ìˆ˜ì • í¬í•¨)
    Admin->>API: PUT /api/admin/shareholders-meetings/:id
    API->>DB: UPDATE translations, vote_results, files
    DB-->>API: ìˆ˜ì • ì™„ë£Œ
    API-->>Admin: 200 OK

    Note over Admin,DB: 7. ì¬ê²€í†  ìš”ì²­ (êµ¬í˜„ í•„ìš”)
    Admin->>API: PATCH /api/admin/shareholders-meetings/:id/status
    Note right of API: {status: 'under_review'}
    API->>DB: UPDATE status = 'under_review'
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (UNDER_REVIEW)

    Note over Admin,DB: 8-10. ìŠ¹ì¸ â†’ ê³µê°œ (ìƒëµ)
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ê³µê°œëœ ì½˜í…ì¸  ìˆ˜ì • (êµ¬í˜„ í•„ìš”)

```mermaid
sequenceDiagram
    participant Admin as ê´€ë¦¬ì
    participant API as API ì„œë²„
    participant DB as ë°ì´í„°ë² ì´ìŠ¤
    participant Shareholder as ì£¼ì£¼

    Note over Admin,Shareholder: âœ… í˜„ì¬ ê³µê°œ ì¤‘ (OPENED, isPublic: true)
    Shareholder->>API: GET /api/public/shareholders-meetings
    API->>DB: SELECT WHERE status='opened' AND isPublic=true
    DB-->>API: ì£¼ì£¼ì´íšŒ ëª©ë¡ + ì˜ê²° ê²°ê³¼
    API-->>Shareholder: 200 OK (ë…¸ì¶œë¨)

    Note over Admin,Shareholder: ìˆ˜ì • í•„ìš” ë°œìƒ (ìë™ ìƒíƒœ ì „ì´, êµ¬í˜„ í•„ìš”)
    Admin->>API: PUT /api/admin/shareholders-meetings/:id
    API->>DB: UPDATE status = 'draft' (ìë™ ì „ì´)
    API->>DB: UPDATE translations, vote_results, files
    DB-->>API: ìˆ˜ì • ì™„ë£Œ
    API-->>Admin: 200 OK (DRAFT)

    Note over Admin,Shareholder: âŒ ì£¼ì£¼ì—ê²Œ ë…¸ì¶œ ì¤‘ë‹¨
    Shareholder->>API: GET /api/public/shareholders-meetings
    API->>DB: SELECT WHERE status='opened' AND isPublic=true
    DB-->>API: í•´ë‹¹ ì£¼ì£¼ì´íšŒ ì œì™¸
    API-->>Shareholder: 200 OK (ë…¸ì¶œ ì•ˆ ë¨)

    Note over Admin,Shareholder: ìˆ˜ì • â†’ ê²€í†  â†’ ìŠ¹ì¸ â†’ ì¬ê³µê°œ
    Admin->>API: PATCH /api/admin/shareholders-meetings/:id/status
    Note right of API: under_review â†’ approved â†’ opened
    API->>DB: UPDATE status
    DB-->>API: ìƒíƒœ ë³€ê²½ ì™„ë£Œ
    API-->>Admin: 200 OK (OPENED)

    Note over Admin,Shareholder: âœ… ì£¼ì£¼ì—ê²Œ ë‹¤ì‹œ ë…¸ì¶œë¨
```

## ğŸ¯ API ì—”ë“œí¬ì¸íŠ¸ ìƒì„¸ ëª…ì„¸

### 1. ì£¼ì£¼ì´íšŒ ìƒì„± âœ…

```
POST /api/admin/shareholders-meetings
Content-Type: multipart/form-data

Body:
- translations: JSON string (ë°°ì—´)
  ì˜ˆ: '[{"languageId":"uuid","title":"ì œëª©","description":"ì„¤ëª…"}]'
- location: string (í•„ìˆ˜, ì£¼ì£¼ì´íšŒ ì¥ì†Œ)
- meetingDate: Date (í•„ìˆ˜, ì£¼ì£¼ì´íšŒ ì¼ì‹œ)
- voteResults: JSON string (ì„ íƒ, ì˜ê²° ê²°ê³¼ ë°°ì—´)
  ì˜ˆ: '[{"agendaNumber":1,"totalVote":1000,"yesVote":950,"noVote":50,"approvalRating":95.0,"result":"accepted","translations":[...]}]'
- files: íŒŒì¼ ë°°ì—´ (PDF/JPG/PNG/WEBP/XLSX/DOCX)

Response: 201 Created
- status: 'draft' (ê¸°ë³¸ê°’)
- isPublic: false (ê¸°ë³¸ê°’)
- translations: ë‹¤êµ­ì–´ ë²ˆì—­ ì •ë³´
- voteResults: ì˜ê²° ê²°ê³¼(ì•ˆê±´) ëª©ë¡
```

### 2. ìƒíƒœ ë³€ê²½ (êµ¬í˜„ í•„ìš”) âŒ

```
PATCH /api/admin/shareholders-meetings/:id/status

Body:
{
  "status": "under_review" | "approved" | "rejected" | "opened" | "draft"
}

Response: 200 OK
- ë³€ê²½ëœ ì£¼ì£¼ì´íšŒ ì •ë³´
```

### 3. ê³µê°œ ì—¬ë¶€ ë³€ê²½ âœ…

```
PATCH /api/admin/shareholders-meetings/:id/public

Body:
{
  "isPublic": true | false
}

Response: 200 OK
- ë³€ê²½ëœ ì£¼ì£¼ì´íšŒ ì •ë³´
```

### 4. ì£¼ì£¼ì´íšŒ ìˆ˜ì • âœ…

```
PUT /api/admin/shareholders-meetings/:id
Content-Type: multipart/form-data

Body:
- translations: JSON string (ë°°ì—´)
- location: string (ì„ íƒ, ì£¼ì£¼ì´íšŒ ì¥ì†Œ)
- meetingDate: Date (ì„ íƒ, ì£¼ì£¼ì´íšŒ ì¼ì‹œ)
- voteResults: JSON string (ì„ íƒ, ì˜ê²° ê²°ê³¼ ë°°ì—´)
  - idê°€ ìˆëŠ” ì•ˆê±´: ê¸°ì¡´ ì•ˆê±´ ì—…ë°ì´íŠ¸
  - idê°€ ì—†ëŠ” ì•ˆê±´: ìƒˆ ì•ˆê±´ ìƒì„±
  - voteResultsì— í¬í•¨ë˜ì§€ ì•Šì€ ê¸°ì¡´ ì•ˆê±´: ì‚­ì œë¨
- files: íŒŒì¼ ë°°ì—´ (ì „ì†¡í•œ íŒŒì¼ë“¤ë¡œ ì™„ì „íˆ êµì²´)

Response: 200 OK
- statusê°€ 'opened'ì˜€ë‹¤ë©´ ìë™ìœ¼ë¡œ 'draft'ë¡œ ì „ì´ (êµ¬í˜„ í•„ìš”)
```

### 5. ì£¼ì£¼ì´íšŒ ì‚­ì œ (Soft Delete) âœ…

```
DELETE /api/admin/shareholders-meetings/:id

Response: 200 OK
{
  "success": true
}
```

### 6. ì •ë ¬ ìˆœì„œ ì¼ê´„ ìˆ˜ì • âœ…

```
PUT /api/admin/shareholders-meetings/batch-order

Body:
{
  "shareholdersMeetings": [
    { "id": "uuid1", "order": 1 },
    { "id": "uuid2", "order": 2 }
  ]
}

Response: 200 OK
{
  "success": true,
  "updatedCount": 2
}
```

### 7. ì£¼ì£¼ì´íšŒ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•) âœ…

```
GET /api/admin/shareholders-meetings?isPublic=true&orderBy=meetingDate&page=1&limit=10

Query Parameters:
- isPublic: boolean (ê³µê°œ ì—¬ë¶€ í•„í„°)
- orderBy: 'order' | 'meetingDate' | 'createdAt' (ì •ë ¬ ê¸°ì¤€)
- page: number (í˜ì´ì§€ ë²ˆí˜¸)
- limit: number (í˜ì´ì§€ë‹¹ ê°œìˆ˜)

Response: 200 OK
{
  "items": [...],
  "total": 50,
  "page": 1,
  "limit": 10,
  "totalPages": 5
}
```

### 8. ì£¼ì£¼ì´íšŒ ì „ì²´ ëª©ë¡ ì¡°íšŒ âœ…

```
GET /api/admin/shareholders-meetings/all

Response: 200 OK
[...ì£¼ì£¼ì´íšŒ ë°°ì—´...]
```

### 9. ì£¼ì£¼ì´íšŒ ìƒì„¸ ì¡°íšŒ âœ…

```
GET /api/admin/shareholders-meetings/:id

Response: 200 OK
{
  "id": "uuid",
  "location": "ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ 123",
  "meetingDate": "2024-03-15T10:00:00.000Z",
  "status": "draft",
  "isPublic": false,
  "order": 0,
  "attachments": [...],
  "translations": [...],
  "voteResults": [
    {
      "id": "uuid",
      "agendaNumber": 1,
      "totalVote": 1000,
      "yesVote": 950,
      "noVote": 50,
      "approvalRating": 95.0,
      "result": "accepted",
      "translations": [...]
    }
  ],
  ...
}
```

### 10. ì¹´í…Œê³ ë¦¬ ê´€ë ¨ API âœ…

```
GET /api/admin/shareholders-meetings/categories
POST /api/admin/shareholders-meetings/categories
PATCH /api/admin/shareholders-meetings/categories/:id
PATCH /api/admin/shareholders-meetings/categories/:id/order
DELETE /api/admin/shareholders-meetings/categories/:id
```

## ğŸ”“ ê³µê°œ ì¡°ê±´ í”Œë¡œìš°

```mermaid
flowchart TD
    Start([ì£¼ì£¼ì´íšŒ API ìš”ì²­])
    Start --> CheckAPI{API íƒ€ì…?}

    CheckAPI -->|ê´€ë¦¬ì API| AdminAPI[ì „ì²´ ì¡°íšŒ ê°€ëŠ¥]
    CheckAPI -->|ê³µê°œ API| PublicAPI[í•„í„°ë§ í•„ìš”]

    PublicAPI --> CheckDeleted{deletedAtì´ nullì¸ê°€?}

    CheckDeleted -->|No| NotVisible1[âŒ ë…¸ì¶œ ì•ˆ ë¨]
    CheckDeleted -->|Yes| CheckStatus{statusê°€ openedì¸ê°€?}

    CheckStatus -->|No| NotVisible2[âŒ ë…¸ì¶œ ì•ˆ ë¨]
    CheckStatus -->|Yes| CheckPublic{isPublicì´ trueì¸ê°€?}

    CheckPublic -->|No| NotVisible3[âŒ ë…¸ì¶œ ì•ˆ ë¨]
    CheckPublic -->|Yes| Visible[âœ… ì£¼ì£¼ì—ê²Œ ë…¸ì¶œë¨<br/>ì´íšŒ ì •ë³´ + ì˜ê²° ê²°ê³¼]

    style NotVisible1 fill:#ffcccc
    style NotVisible2 fill:#ffcccc
    style NotVisible3 fill:#ffcccc
    style Visible fill:#ccffcc
    style AdminAPI fill:#e3f2fd
```

## ğŸ“‹ ìƒíƒœ ì „ì´ ê·œì¹™ ìš”ì•½

### í—ˆìš©ë˜ëŠ” ì „ì´

| í˜„ì¬ ìƒíƒœ      | ë‹¤ìŒ ìƒíƒœ      | API ì—”ë“œí¬ì¸íŠ¸                                          | ì¡°ê±´        | êµ¬í˜„ ìƒíƒœ |
| -------------- | -------------- | ------------------------------------------------------- | ----------- | --------- |
| `draft`        | `under_review` | `PATCH /api/admin/shareholders-meetings/:id/status`     | ê²€í†  ìš”ì²­   | âŒ        |
| `under_review` | `approved`     | `PATCH /api/admin/shareholders-meetings/:id/status`     | ìŠ¹ì¸        | âŒ        |
| `under_review` | `rejected`     | `PATCH /api/admin/shareholders-meetings/:id/status`     | ê±°ë¶€        | âŒ        |
| `under_review` | `draft`        | `PATCH /api/admin/shareholders-meetings/:id/status`     | ê²€í†  ì·¨ì†Œ   | âŒ        |
| `approved`     | `opened`       | `PATCH /api/admin/shareholders-meetings/:id/status`     | ê³µê°œ ì„¤ì •   | âŒ        |
| `approved`     | `draft`        | `PUT /api/admin/shareholders-meetings/:id` (ìë™ ì „ì´)  | ìˆ˜ì • ì‹œì‘   | âŒ        |
| `rejected`     | `draft`        | `PATCH /api/admin/shareholders-meetings/:id/status`     | ìˆ˜ì • ì‹œì‘   | âŒ        |
| `opened`       | `draft`        | `PUT /api/admin/shareholders-meetings/:id` (ìë™ ì „ì´)  | ìˆ˜ì • ì‹œì‘   | âŒ        |
| `opened`       | `opened`       | `PATCH /api/admin/shareholders-meetings/:id/public`     | ë¹„ê³µê°œ ì„¤ì • | âœ…        |

### ê¸ˆì§€ë˜ëŠ” ì „ì´

- âŒ `draft` â†’ `approved` (ê²€í†  ì—†ì´ ìŠ¹ì¸ ë¶ˆê°€)
- âŒ `draft` â†’ `opened` (ê²€í†  ë° ìŠ¹ì¸ ì—†ì´ ê³µê°œ ë¶ˆê°€)
- âŒ `rejected` â†’ `approved` (ê±°ë¶€ í›„ ë°”ë¡œ ìŠ¹ì¸ ë¶ˆê°€)
- âŒ `rejected` â†’ `opened` (ê±°ë¶€ëœ ì½˜í…ì¸  ê³µê°œ ë¶ˆê°€)
- âŒ `under_review` â†’ `opened` (ê²€í†  ì¤‘ ê³µê°œ ë¶ˆê°€)

## ğŸ”§ êµ¬í˜„ í•„ìš” ì‚¬í•­

### í˜„ì¬ êµ¬í˜„ëœ ê¸°ëŠ¥ âœ…

- âœ… ì£¼ì£¼ì´íšŒ ìƒì„± (ê¸°ë³¸ê°’: `status: 'draft'`)
- âœ… ì£¼ì£¼ì´íšŒ ëª©ë¡ ì¡°íšŒ (í˜ì´ì§•, 3ê°€ì§€ ì •ë ¬ ê¸°ì¤€)
- âœ… ì£¼ì£¼ì´íšŒ ì „ì²´ ëª©ë¡ ì¡°íšŒ
- âœ… ì£¼ì£¼ì´íšŒ ìƒì„¸ ì¡°íšŒ (ì˜ê²° ê²°ê³¼ í¬í•¨)
- âœ… ê³µê°œ ì—¬ë¶€ ìˆ˜ì • (`isPublic`)
- âœ… ì£¼ì£¼ì´íšŒ ìˆ˜ì • (ë²ˆì—­, ì˜ê²° ê²°ê³¼, íŒŒì¼)
- âœ… ì •ë ¬ ìˆœì„œ ì¼ê´„ ìˆ˜ì •
- âœ… ì‚­ì œ (Soft Delete)
- âœ… ì¹´í…Œê³ ë¦¬ CRUD
- âœ… ì˜ê²° ê²°ê³¼(ì•ˆê±´) CRUD (ìƒì„±/ìˆ˜ì •/ì‚­ì œ ì§€ì›)

### êµ¬í˜„ í•„ìš” ê¸°ëŠ¥ âŒ

- âš ï¸ **ìƒíƒœ ë³€ê²½ API** (`PATCH /api/admin/shareholders-meetings/:id/status`)
  - ìƒíƒœ ì „ì´ ê²€ì¦ ë¡œì§
  - í—ˆìš©ë˜ì§€ ì•ŠëŠ” ìƒíƒœ ì „ì´ ë°©ì§€
  - ìƒíƒœë³„ ì•¡ì…˜ ì œí•œ ê²€ì¦

- âš ï¸ **ìë™ ìƒíƒœ ì „ì´**
  - `opened` ë˜ëŠ” `approved` ìƒíƒœì—ì„œ ë‚´ìš© ìˆ˜ì • ì‹œ ìë™ìœ¼ë¡œ `draft`ë¡œ ì „ì´
  - íŠ¸ëœì­ì…˜ ì²˜ë¦¬ í•„ìš”

- âš ï¸ **ìƒíƒœë³„ ê¶Œí•œ ì²´í¬**
  - ê²€í† ì¤‘ ìƒíƒœì—ì„œëŠ” ìˆ˜ì •/ì‚­ì œ ë¶ˆê°€
  - ìŠ¹ì¸ ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë§Œ ìƒíƒœ ë³€ê²½ ê°€ëŠ¥

## ğŸ“š ì°¸ê³  ì‚¬í•­

- ìƒíƒœ ë³€ê²½ì€ **ì›ìì (Atomic)**ìœ¼ë¡œ ì²˜ë¦¬ë˜ì–´ì•¼ í•¨
- ìƒíƒœ ì „ì´ ì‹œ **ì´ë ¥ ë¡œê¹…** ê³ ë ¤ (ì„ íƒì‚¬í•­)
- **Optimistic Locking** (`version` í•„ë“œ)ì„ í™œìš©í•˜ì—¬ ë™ì‹œ ìˆ˜ì • ë°©ì§€
- ìƒíƒœë³„ **ê¶Œí•œ ì²´í¬** í•„ìš” (ì˜ˆ: ìŠ¹ì¸ ê¶Œí•œì´ ìˆëŠ” ì‚¬ìš©ìë§Œ ìƒíƒœ ë³€ê²½ ê°€ëŠ¥)

## ğŸ¨ ë‹¤êµ­ì–´ ì „ëµ

ì£¼ì£¼ì´íšŒëŠ” **ë‹¤êµ­ì–´ë¥¼ ì§€ì›**í•˜ë©°, ë¸Œë¡œìŠˆì–´, IRê³¼ ë™ì¼í•œ ì „ëµì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

1. **ì „ë‹¬ë°›ì€ ì–¸ì–´**: `isSynced = false` (ì‚¬ìš©ì ì…ë ¥)
2. **ë‚˜ë¨¸ì§€ í™œì„± ì–¸ì–´**: `isSynced = true` (ìë™ ë™ê¸°í™”)
3. **ê¸°ì¤€ ë²ˆì—­**: í•œêµ­ì–´ ìš°ì„ , ì—†ìœ¼ë©´ ì²« ë²ˆì§¸ ë²ˆì—­ì„ ê¸°ì¤€ìœ¼ë¡œ ìë™ ë™ê¸°í™”

### ì˜ê²° ê²°ê³¼(ì•ˆê±´) ë²ˆì—­

ì˜ê²° ê²°ê³¼(VoteResult)ë„ ë™ì¼í•œ ë‹¤êµ­ì–´ ì „ëµì„ ì‚¬ìš©í•©ë‹ˆë‹¤:
- ê° ì•ˆê±´ë³„ë¡œ ë‹¤êµ­ì–´ ë²ˆì—­ ì§€ì› (VoteResultTranslation)
- ì£¼ì£¼ì´íšŒ ë²ˆì—­ê³¼ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬

## ğŸ—‚ï¸ íŒŒì¼ ê´€ë¦¬ ì „ëµ

ì£¼ì£¼ì´íšŒì˜ ì²¨ë¶€íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì´ ê´€ë¦¬ë©ë‹ˆë‹¤:

1. **íŒŒì¼ ì—…ë¡œë“œ**: AWS S3ì— ì—…ë¡œë“œë˜ë©° JSONB í˜•íƒœë¡œ ì €ì¥
2. **íŒŒì¼ ìˆ˜ì •**: ê¸°ì¡´ íŒŒì¼ ì „ë¶€ ì‚­ì œ í›„ ìƒˆ íŒŒì¼ë¡œ êµì²´
3. **íŒŒì¼ í˜•ì‹**: PDF, JPG, PNG, WEBP, XLSX, DOCX ì§€ì›

## ğŸ“Š ì˜ê²° ê²°ê³¼(ì•ˆê±´) ê´€ë¦¬

### ì˜ê²° ê²°ê³¼ ì—”í‹°í‹° êµ¬ì¡°

ì£¼ì£¼ì´íšŒëŠ” ì˜ê²° ê²°ê³¼(VoteResult)ë¥¼ í¬í•¨í•˜ì—¬ ê´€ë¦¬ë©ë‹ˆë‹¤:

| í•„ë“œ               | íƒ€ì…            | ì„¤ëª…                            |
| ------------------ | --------------- | ------------------------------- |
| **agendaNumber**   | number          | ì•ˆê±´ ë²ˆí˜¸ (ì œ1í˜¸ ì˜ì•ˆ, ì œ2í˜¸...)  |
| **totalVote**      | number          | ì´ ì˜ê²°ê¶Œ ìˆ˜                     |
| **yesVote**        | number          | ì°¬ì„± ì˜ê²°ê¶Œ ìˆ˜                   |
| **noVote**         | number          | ë°˜ëŒ€ ì˜ê²°ê¶Œ ìˆ˜                   |
| **approvalRating** | number          | ì°¬ì„±ë¥  (%)                       |
| **result**         | VoteResultType  | ì˜ê²° ê²°ê³¼ (accepted/rejected)    |
| **translations**   | array           | ì•ˆê±´ ì œëª© ë‹¤êµ­ì–´ ë²ˆì—­            |

### ì˜ê²° ê²°ê³¼ íƒ€ì…

```typescript
enum VoteResultType {
  ACCEPTED = 'accepted',  // ê°€ê²°
  REJECTED = 'rejected',  // ë¶€ê²°
}
```

### ì˜ê²° ê²°ê³¼ ê´€ë¦¬ ë°©ì‹

```mermaid
flowchart TD
    Start([ì£¼ì£¼ì´íšŒ ìˆ˜ì •])
    Start --> Check{voteResults ì „ë‹¬?}
    
    Check -->|No| KeepAll[ê¸°ì¡´ ì•ˆê±´ ìœ ì§€]
    Check -->|Yes| Process[ì•ˆê±´ ì²˜ë¦¬ ì‹œì‘]
    
    Process --> CheckId{ì•ˆê±´ì— id ìˆìŒ?}
    
    CheckId -->|Yes| Update[ê¸°ì¡´ ì•ˆê±´ ì—…ë°ì´íŠ¸]
    CheckId -->|No| Create[ìƒˆ ì•ˆê±´ ìƒì„±]
    
    Update --> UpdateTrans[ì•ˆê±´ ë²ˆì—­ ì—…ë°ì´íŠ¸]
    Create --> CreateTrans[ì•ˆê±´ ë²ˆì—­ ìƒì„±]
    
    UpdateTrans --> CheckRemove{voteResultsì—<br/>í¬í•¨ ì•ˆ ëœ ì•ˆê±´?}
    CreateTrans --> CheckRemove
    
    CheckRemove -->|Yes| Delete[í•´ë‹¹ ì•ˆê±´ ì‚­ì œ]
    CheckRemove -->|No| Done[ì™„ë£Œ]
    
    Delete --> Done
    
    style Create fill:#c8e6c9
    style Update fill:#fff9c4
    style Delete fill:#ffcdd2
```

## ğŸ¢ ì£¼ì£¼ì´íšŒì˜ íŠ¹ì§•

ì£¼ì£¼ì´íšŒëŠ” ê¸°ì—… ì§€ë°°êµ¬ì¡°ì˜ í•µì‹¬ ì •ë³´ë¥¼ ì œê³µí•˜ëŠ” ì½˜í…ì¸ ë¡œ, ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤:

| íŠ¹ì§•                  | ì„¤ëª…                                          |
| --------------------- | --------------------------------------------- |
| **ëŒ€ìƒ**              | ì£¼ì£¼ (íšŒì‚¬ì˜ ì£¼ì¸)                            |
| **ë‹¤êµ­ì–´ ì§€ì›**       | âœ… ì§€ì› (ShareholdersMeetingTranslation)      |
| **ì˜ê²° ê²°ê³¼**         | âœ… ì§€ì› (VoteResult ì—”í‹°í‹°)                   |
| **íŒŒì¼ í˜•ì‹**         | PDF, ì´ë¯¸ì§€, ì—‘ì…€, ì›Œë“œ ë“± ë‹¤ì–‘í•œ í˜•ì‹        |
| **í•„ìˆ˜ ì •ë³´**         | location(ì¥ì†Œ), meetingDate(ì¼ì‹œ)             |
| **ì •ë ¬ ê¸°ì¤€**         | order, meetingDate, createdAt 3ê°€ì§€ ì§€ì›      |
| **ì¹´í…Œê³ ë¦¬**          | âœ… ì§€ì› (ì •ê¸° ì´íšŒ, ì„ì‹œ ì´íšŒ ë“±)             |

## ğŸ†š IRê³¼ì˜ ë¹„êµ

| íŠ¹ì§•                | IR                       | ì£¼ì£¼ì´íšŒ                          |
| ------------------- | ------------------------ | --------------------------------- |
| ë‹¤êµ­ì–´ ì§€ì›         | âœ… IRTranslation         | âœ… ShareholdersMeetingTranslation |
| ì˜ê²° ê²°ê³¼(ì•ˆê±´)     | âŒ ì—†ìŒ                  | âœ… VoteResult + VoteResultTranslation |
| ì¥ì†Œ/ì¼ì‹œ           | âŒ ì—†ìŒ                  | âœ… location, meetingDate í•„ìˆ˜     |
| íŒŒì¼ í˜•ì‹           | PDF/ì´ë¯¸ì§€/ë¬¸ì„œ ë‹¤ì–‘     | PDF/ì´ë¯¸ì§€/ë¬¸ì„œ ë‹¤ì–‘              |
| ëŒ€ìƒ                | íˆ¬ìì                   | ì£¼ì£¼                              |
| ì¹´í…Œê³ ë¦¬            | âœ… ì§€ì›                  | âœ… ì§€ì›                           |
| ìƒíƒœ íë¦„           | ë™ì¼                     | ë™ì¼                              |
| ë‹¤êµ­ì–´ ì „ëµ         | isSynced í™œìš©            | isSynced í™œìš©                     |
| ì •ë ¬ ê¸°ì¤€           | order, createdAt         | order, meetingDate, createdAt     |

## ğŸ“„ ì£¼ì£¼ì´íšŒ ì—”í‹°í‹° êµ¬ì¡°

### ì£¼ìš” í•„ë“œ

- **location**: ì£¼ì£¼ì´íšŒ ì¥ì†Œ (í•„ìˆ˜, varchar 500)
- **meetingDate**: ì£¼ì£¼ì´íšŒ ì¼ì‹œ (í•„ìˆ˜, timestamp)
- **status**: ì½˜í…ì¸  ìƒíƒœ (enum)
- **isPublic**: ê³µê°œ ì—¬ë¶€ (boolean)
- **imageUrl**: ëŒ€í‘œ ì´ë¯¸ì§€ URL (ì„ íƒ, text)
- **attachments**: ì²¨ë¶€íŒŒì¼ ëª©ë¡ (jsonb)
- **order**: ì •ë ¬ ìˆœì„œ (int)
- **translations**: ë‹¤êµ­ì–´ ë²ˆì—­ (OneToMany)
- **voteResults**: ì˜ê²° ê²°ê³¼ ëª©ë¡ (OneToMany)

### ì£¼ì£¼ì´íšŒë§Œì˜ íŠ¹ì§•

- **ì˜ê²° ê²°ê³¼(ì•ˆê±´) ê´€ë¦¬**: VoteResult ì—”í‹°í‹°ë¥¼ í†µí•œ ì•ˆê±´ë³„ íˆ¬í‘œ ê²°ê³¼ ê´€ë¦¬
- **ì¥ì†Œ/ì¼ì‹œ ì •ë³´**: ì£¼ì£¼ì´íšŒ ê°œìµœ ì •ë³´ë¥¼ ëª…í™•íˆ ì œê³µ
- **ì •ë ¬ ë‹¤ì–‘ì„±**: ìˆœì„œ, ì´íšŒì¼ì‹œ, ìƒì„±ì¼ì‹œ ê¸°ì¤€ ì •ë ¬ ì§€ì›
- **ë³µí•© ë°ì´í„° êµ¬ì¡°**: ì´íšŒ ê¸°ë³¸ ì •ë³´ + ì˜ê²° ê²°ê³¼ + ë‹¤êµ­ì–´ ë²ˆì—­ì˜ 3ë‹¨ê³„ êµ¬ì¡°
